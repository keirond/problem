#!/bin/bash

err_echo() {
	echo "$@" >&2
}

usage() {
	err_echo "Usage: gen <testcase name>"
	exit 1
}

if [[ $# -lt 1 ]]; then
	usage
fi

filename="$1"

if [[ -f "$filename.in" || -f "$filename.out" ]]; then
	read -r -p "$filename.in or $filename.out already exists. Do you want to overwrite them? (y/n): " choice
	case "$choice" in
	y | Y)
		err_echo "Overwriting $filename.in and $filename.out"
		rm -f "$filename.in" "$filename.out"
		touch "$filename.in" "$filename.out"
		subl "$filename.in" "$filename.out"
		;;
	n | N)
		err_echo "Keeping existing $filename.in and $filename.out"
		subl "$filename.in" "$filename.out"
		;;
	*)
		err_echo "Invalid option. Exiting."
		exit 1
		;;
	esac
else
	touch "$filename.in" "$filename.out"
	subl "$filename.in" "$filename.out"
fi
