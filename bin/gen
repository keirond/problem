#!/bin/bash

err_echo() {
	echo "$@" >&2
}

usage() {
	err_echo "Usage: gen <sample_name>"
	exit 1
}

if [[ $# -lt 1 ]]; then
	usage
fi

sample_name="$1"

if [[ -z "$sample_name" ]]; then
	err_echo "Error: No sample name provided!"
	exit 1
fi

input_file="$sample_name.in"
output_file="$sample_name.out"

if [[ -f "$input_file" || -f "$output_file" ]]; then
	read -r -p "$input_file or $output_file already exists. Do you want to overwrite them? (y/n): " choice
	case "$choice" in
	y | Y)
		err_echo "Overwriting $input_file and $output_file"
		rm -f "$input_file" "$output_file"
		touch "$input_file" "$output_file"
		subl "$input_file" "$output_file"
		;;
	n | N)
		err_echo "Keeping existing $input_file and $output_file"
		subl "$input_file" "$output_file"
		;;
	*)
		err_echo "Invalid option. Exiting."
		exit 1
		;;
	esac
else
	touch "$input_file" "$output_file"
	subl "$input_file" "$output_file"
fi
